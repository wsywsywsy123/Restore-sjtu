# 知识库使用说明

## 📚 知识库导入完成

已成功导入 **37条** 专业知识，涵盖：

- **病害知识**: 12条
- **材料特性**: 4条  
- **修复方法**: 13条
- **检测技术**: 4条
- **其他**: 4条

## 🚀 使用方式

### 方式1: 通过前端界面

1. 启动应用：`python start_app.py`
2. 打开浏览器访问：`http://localhost:8501`
3. 点击 **"知识库"** 标签页
4. 可以搜索、查看、添加知识

### 方式2: 通过后端API

#### 启动后端服务
```bash
python backend_api.py
# 或
python start_backend.py
```

#### 添加知识
```python
import requests

response = requests.post(
    "http://localhost:8000/api/knowledge/add",
    json={
        "title": "新知识标题",
        "category": "病害知识",
        "content": "知识内容...",
        "tags": ["标签1", "标签2"],
        "material_type": "大足石刻（砂岩）",
        "disease_type": "裂缝"
    }
)
print(response.json())
```

#### 搜索知识
```python
import requests

response = requests.get(
    "http://localhost:8000/api/knowledge/search",
    params={
        "keyword": "裂缝",
        "category": "病害知识",
        "limit": 10
    }
)
print(response.json())
```

### 方式3: 使用Python脚本

```python
from knowledge_base import KnowledgeBase

kb = KnowledgeBase()

# 添加知识
kb_id = kb.add_knowledge(
    title="知识标题",
    category="病害知识",
    content="知识内容",
    tags=["标签1", "标签2"]
)

# 搜索知识
results = kb.search_knowledge(keyword="裂缝", limit=10)
for item in results:
    print(item['title'])
```

## 📖 已导入的知识内容

### 1. 病害分类体系
- 裂缝（微裂缝、发丝裂缝、结构裂缝、网状裂缝）
- 剥落（粉化剥落、片状剥落、块状剥落）
- 变色（褪色、变暗、黄变）
- 污渍（水渍、霉斑、铁锈渍）
- 盐析（表面盐霜、次表面盐分）
- 生物附着（苔藓、地衣、霉菌）

### 2. 材质特性
- 砂岩特性与病害关系
- 石灰岩特性与病害关系
- 灰泥地仗层特性
- 颜料层特性

### 3. 修复方法
- 表面加固技术
- 深层加固技术
- 机械清洗方法
- 化学清洗方法
- 激光清洗技术
- 裂缝填补方法
- 缺损填补方法

### 4. 环境因素
- 温度对壁画的影响
- 湿度对壁画的影响
- 光照对壁画的影响
- 污染物对壁画的影响

### 5. 石窟特征
- 敦煌莫高窟特征与保护
- 云冈石窟特征与保护
- 龙门石窟特征与保护
- 麦积山石窟特征与保护

### 6. 保护原则
- 最小干预原则
- 可逆性原则
- 材料兼容性原则
- 真实性原则
- 全程记录原则
- 预防性保护优先

## 🔍 搜索示例

### 按关键词搜索
```
关键词: "裂缝"
结果: 所有包含"裂缝"的知识条目
```

### 按类别搜索
```
类别: "修复方法"
结果: 所有修复方法相关的知识
```

### 按材质搜索
```
材质类型: "大足石刻（砂岩）"
结果: 与砂岩相关的知识
```

### 按病害类型搜索
```
病害类型: "裂缝"
结果: 裂缝相关的所有知识
```

## 📝 继续添加知识

### 通过API批量导入
```python
# 使用 import_knowledge_base.py 脚本
python import_knowledge_base.py
```

### 手动添加
可以通过前端界面或API接口手动添加新知识。

## 🔗 API文档

完整的API文档请访问：
- Swagger文档：`http://localhost:8000/docs`
- 或查看 `knowledge_api_docs.md` 文件

## 💡 提示

1. **知识库位置**: `persistent_data/knowledge_base.db`
2. **数据持久化**: 所有知识自动保存到SQLite数据库
3. **搜索功能**: 支持多维度搜索和筛选
4. **关联查询**: 可以根据材质、病害类型等建立关联

## 📊 统计信息

运行导入脚本后会显示：
- 总知识数量
- 按类别统计
- 导入状态

现在您的知识库已经包含了完整的专业内容，可以为AI诊断系统提供强大的知识支撑！


